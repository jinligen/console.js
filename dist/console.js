/*!
 * @preserve https://github.com/wusfen/console.js
 *
 * #f12 开启 Console控制台
 *
 * hash路由可用以下代替
 * url#/page#f12    url##f12    url#/#f12    url?f12    url?k=v&f12
 */
!function(){var d=function(){},f=function(e,o){for(var n in o)e[n]=o[n];return e},p=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},u=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")},n=function(e){var o=n.el=n.el||document.createElement("div");return o.innerHTML=e,o.children[0]},h=function(e,o){for(var n=0;n<e.children.length;n++){var t=e.children[n];if(o==t.className||o==t.tagName.toLowerCase())return t;var r=h(t,o);if(r)return r}},l=function(e,o){e.className+=" "+o},t=function(e,o){e.className=e.className.replace(RegExp(" *"+o,"ig"),"")},g=function(e,o){var n;n=o,e.className.match(n)?t(e,o):l(e,o)},v=n('<div console> <style type="text/css"> .console {z-index: 999999999; position: fixed; left: 0; right: 0; bottom: -1px; font-size: 12px; font-family: Menlo, Monaco, Consolas, "Courier New", monospace; line-height: 1.5; background: rgba(255, 255, 255, .98); box-shadow: rgba(0, 0, 0, 0.2) 0px 0 15px 0; transition: .5s; max-height: 0; max-height: 500px; display: none; } .console * {font: inherit; box-sizing: border-box; } .console.show {display: block; } .console.closed {max-height: 0; } .console.closed .f12 {opacity: .8; } .console .f12 {position: absolute; bottom: 100%; right: 0; background: rgba(255, 255, 255, .98); border: solid 1px #eee; border-bottom: 0; border-radius: 5px 5px 0 0; padding: 5px; box-shadow: rgba(0, 0, 0, 0.1) 4px -4px 10px -4px; color: #555; letter-spacing: -1px; cursor: pointer; } .console ul {list-style: none; margin: 0; padding: 0; padding-bottom: 3em; margin-bottom: -3em; max-height: 350px; overflow: auto; -webkit-overflow-scrolling: touch; } .console ul li {padding: .5em; border-bottom: solid 1px #f7f7f7; overflow: auto; } .console ul li>.obj {float: left; max-width: 100%; padding: 0 .5em; } .console .log {color: #555; } .console .info {background: #f3faff; color: #0095ff; } .console .warn {background: #fffaf3; color: #FF6F00; } .console .error {background: #fff7f7; color: red; } .console .cmd {position: relative; background: #fff; color: #0af; } .console .cmd .key:before {content: "$ "; position: absolute; left: 0; color: #ddd; } .console .obj {cursor: default; white-space: nowrap; } .console .obj:after {content: ""; display: table; clear: both; } .console .key {/*float: left;*/ /*margin-right: 1ex;*/ color: #a71d5d; } .console .value {/*float: left;*/ max-width: 10em; overflow: hidden; text-overflow: ellipsis; } .console .children {clear: both; padding-left: 2em; border-left: dotted 1px #ddd; display: none; } .console .open>.value {white-space: pre; overflow: visible; max-width: none; } .console .open>.children {display: block; } .console .input {line-height: 1.25; display: block; width: 100%; border: none; outline: none; height: 3em; padding: .25em 1em; resize: none; position: relative; background: rgba(255, 255, 255, .8); } </style> <div class="console"> <span class="f12">F12</span> <ul> <li> <div class="obj"> <span class="key"></span> <span class="value"></span> <div class="children"></div> </div> </li> </ul> <textarea class="input" placeholder="$" autofocus></textarea> </div> </div>'),o=h(v,"console"),e=h(o,"f12"),i=h(o,"ul"),a=h(o,"li"),m=h(o,"obj"),r=(h(o,"children"),h(o,"input"));i.innerHTML="",e.onclick=function(){g(o,"closed")};var b=function(e,o,n){i.scrollTop+i.clientHeight>i.scrollHeight-20&&setTimeout(function(){i.scrollTop+=999},41);var t=a.cloneNode(!0);l(t,e),t.innerHTML="",i.appendChild(t);for(var r=0;r<o.length;r++)c("",o[r],t,n);200<i.children.length&&i.removeChild(i.children[0])},c=function(e,o,n,t){var r=m.cloneNode(!0),l=h(r,"key"),i=h(r,"value"),a=h(r,"children");if(n.appendChild(r),!t&&o&&o.nodeType){if(1==o.nodeType){var c=o.cloneNode().outerHTML.split("></"),s=c[0]+(c[1]?">":"");c[1];l.innerText=s,i.innerText=""}else 3==o.nodeType?o.nodeValue.match(/\S/)&&(i.innerText=u(o.nodeValue)):9==o.nodeType&&(l.innerText=e,i.innerText=o.nodeName);o.childNodes;o=function(e){for(var o=[],n=e.length;n--;)o[n]=e[n];return o}(o.childNodes)}else{if(l.innerText=e,!o||o.toString||o.valueOf){var d=u(o+"");o&&o._toConsole&&(d=o._toConsole(),delete o._toConsole),i.innerHTML=d}"array"==p(o)&&(i.innerText=o.length+"["+o+"]")}l.onclick=i.onclick=function(){window.v=o,g(r,"open"),i._printed||(i._printed=!0,x(o,a,t))}},x=function(e,o,n){if("string"!=p(e)){var t="array"==p(e);for(var r in e)if(c(r,e[r],o,n),t&&500<r)return void c("...","",o,n)}};function y(){if(!y.bool){y.bool=!0;var e={log:d,info:d,warn:d,error:d,dir:d};window.console=window.console||e,console._back&&(console._back(),delete console._back);var o=f({},window.console);for(var n in e)!function(e){console[e]=function(){o[e].apply(console,arguments),b(e,arguments,"dir"==e)}}(n);addEventListener("error",function(e){b("error",s([e]))},!0);var t=window.XMLHttpRequest||d,l=t.prototype.open,i=t.prototype.send;t.prototype.open=function(n,t){var r=this;r.onreadystatechange=function(e){if(4==r.readyState){var o=400<r.status?"error":"info";console[o]({_toConsole:function(){return"["+n+"] "+r.status+" "+t},data:{todo:null},headers:r.getAllResponseHeaders(),response:function(){try{return JSON.parse(r.responseText)}catch(e){}return r.responseText}(),event:e,xhr:r})}},l.apply(this,arguments),r.send=function(e){i.apply(this,arguments)}},setTimeout(function(){document.body.appendChild(v)},1);for(var r=console._logs||[],a=0;a<r.length;a++){var c=r[a];b(c.type,"error"==c.type?s(c.arr):c.arr)}delete console._logs}function s(e){if(1==e.length){var o=e[0],n=o.target,t=n.src||n.href;if(t){var r=o.target.outerHTML;return t=decodeURIComponent(t),[{tag:r,event:o,_toConsole:function(){return t}}]}return o._toConsole=function(){return o.message},[o,o.filename,o.lineno+":"+o.colno]}return e}}r.onkeydown=function(e){var o=r.value;if(13!=e.keyCode||!o.match(/[[{(,;]$/)){if(13==e.keyCode&&""===o)return i.innerHTML="",!1;if(13==e.keyCode){b("cmd",[o]),setTimeout(function(){r.value="",i.scrollTop+=9999},41),o=o.match(/^\s*{/)?"("+o+")":o;var n=window.eval(o);return console.log(n),!1}}},navigator.userAgent.match(/mobile/i)&&y(),location.href.match(/[?&#]f12/)&&(l(o,"show"),y()),addEventListener("hashchange",function(e){location.hash.match("#f12")?(y(),l(o,"show")):t(o,"show")})}();